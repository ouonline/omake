# This Makefile is generated by omake: https://github.com/ouonline/omake.git

CXX := g++

ifeq ($(debug), y)
	CXXFLAGS += -g
else
	CXXFLAGS += -O2 -DNDEBUG
endif

TARGET := omake

.PHONY: all clean distclean

all: $(TARGET)

.PHONY: omake_phony_0
omake_phony_0:
	$(MAKE) debug=$(debug) libluacpp_static.a -C ../lua-cpp

.PHONY: omake_phony_1
omake_phony_1:
	$(MAKE) debug=$(debug) libtext_utils_static.a -C ../text-utils

omake_dep_0_INCLUDE := -I../../../lua -I..

omake_dep_0.utils.cpp.o: utils.cpp
	$(CXX) $(CXXFLAGS) -Wall -Werror -Wextra $(omake_dep_0_INCLUDE) -c $< -o $@

omake_dep_0.main.cpp.o: main.cpp
	$(CXX) $(CXXFLAGS) -Wall -Werror -Wextra $(omake_dep_0_INCLUDE) -c $< -o $@

omake_dep_0.dependency.cpp.o: dependency.cpp
	$(CXX) $(CXXFLAGS) -Wall -Werror -Wextra $(omake_dep_0_INCLUDE) -c $< -o $@

omake_dep_0.target.cpp.o: target.cpp
	$(CXX) $(CXXFLAGS) -Wall -Werror -Wextra $(omake_dep_0_INCLUDE) -c $< -o $@

omake_dep_0.project.cpp.o: project.cpp
	$(CXX) $(CXXFLAGS) -Wall -Werror -Wextra $(omake_dep_0_INCLUDE) -c $< -o $@

omake_OBJS := omake_dep_0.project.cpp.o omake_dep_0.target.cpp.o omake_dep_0.dependency.cpp.o omake_dep_0.main.cpp.o omake_dep_0.utils.cpp.o

omake_LIBS := ../lua-cpp/libluacpp_static.a ../text-utils/libtext_utils_static.a ../../../lua/src/liblua.a

omake: $(omake_OBJS) | omake_phony_1 omake_phony_0
	$(CXX) $(CXXFLAGS) -Wextra -Werror -Wall -o $@ $^ $(omake_LIBS)

clean:
	rm -f $(TARGET) $(omake_OBJS)

distclean:
	$(MAKE) clean
	$(MAKE) distclean -C ../text-utils
	$(MAKE) distclean -C ../lua-cpp
